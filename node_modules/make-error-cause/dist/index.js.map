{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,sCAAuC;AACvC,6BAA8B;AAE9B;;GAEG;AACU,QAAA,cAAc,GAAG,8EAA8E,CAAA;AAE5G;IAA+B,6BAAmB;IAEhD,mBAAa,OAAe,EAAS,KAAa;QAAlD,YACE,kBAAM,OAAO,CAAC,SACf;QAFoC,WAAK,GAAL,KAAK,CAAQ;;IAElD,CAAC;IAED,oBAAC,cAAO,CAAC,MAAM,IAAI,SAAS,CAAC,GAA7B;QACE,OAAO,SAAS,CAAC,IAAI,CAAC,CAAA;IACxB,CAAC;IAEH,gBAAC;AAAD,CAAC,AAVD,CAA+B,SAAS,CAAC,SAAS,GAUjD;AAVY,8BAAS;AAYtB,mBAA2B,KAAwB;IACjD,IAAI,GAAG,GAAuB,KAAmB,CAAC,KAAK,CAAA;IACvD,IAAI,SAAS,GAAG,KAAK,CAAC,KAAK,CAAA;IAE3B,OAAO,GAAG,EAAE;QACV,SAAS,IAAI,sBAAc,CAAA;QAC3B,SAAS,IAAI,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,OAAO,CAAA;QAErC,GAAG,GAAI,GAAiB,CAAC,KAAK,CAAA;KAC/B;IAED,OAAO,SAAS,CAAA;AAClB,CAAC;AAZD,8BAYC","sourcesContent":["import * as makeError from 'make-error'\nimport { inspect } from 'util'\n\n/**\n * @internal\n */\nexport const SEPARATOR_TEXT = `\\n\\nThe following exception was the direct cause of the above exception:\\n\\n`\n\nexport class BaseError extends makeError.BaseError {\n\n  constructor (message: string, public cause?: Error) {\n    super(message)\n  }\n\n  [inspect.custom || 'inspect'] () {\n    return fullStack(this)\n  }\n\n}\n\nexport function fullStack (error: Error | BaseError) {\n  let err: Error | undefined = (error as BaseError).cause\n  let fullStack = error.stack\n\n  while (err) {\n    fullStack += SEPARATOR_TEXT\n    fullStack += err.stack || err.message\n\n    err = (err as BaseError).cause\n  }\n\n  return fullStack\n}\n"]}